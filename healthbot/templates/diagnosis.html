{% extends "base.html" %}
{% block content %}
<div class="container py-5 mt-5">
  <h2 class="mb-4 text-center">ğŸ§  SmartCareâ€¯AI â€” Diagnosis Tools</h2>

  <div class="accordion" id="diagnosisAccordion">

    <!-- AI DIAGNOSIS --------------------------------------------------->
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingAI">
        <button class="accordion-button" type="button"
                data-bs-toggle="collapse" data-bs-target="#collapseAI">
          ğŸ¤–  AI Symptom Checker
        </button>
      </h2>
      <div id="collapseAI" class="accordion-collapse collapse show"
           data-bs-parent="#diagnosisAccordion">
        <div class="accordion-body">
          <form method="POST">
            <label class="form-label" for="text">
              Type the symptoms you feel (example: â€œfever, sore throatâ€)
            </label>
            <input type="text" name="text" id="text"
                   class="form-control"
                   placeholder="e.g. tummy ache, headache"
                   value="cough, runny nose">
            <button type="submit" class="btn btn-primary mt-2">
              ğŸ”  Tell me what it might be
            </button>
          </form>
      {% if result %}
  <div class="alert alert-info mt-3">
    <p><strong>AI thinks you might have:</strong></p>
    {% for condition, explanation in result %}
      <p>ğŸ©º <strong>{{ condition }}</strong>: {{ explanation }}</p>
    {% endfor %}
  </div>
{% endif %}



        </div>
      </div>
    </div>

    <!-- DIABETES ------------------------------------------------------->
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingDiabetes">
        <button class="accordion-button collapsed" type="button"
                data-bs-toggle="collapse" data-bs-target="#collapseDiabetes">
          ğŸ’‰  Diabetes Risk Checker
        </button>
      </h2>
      <div id="collapseDiabetes" class="accordion-collapse collapse"
           data-bs-parent="#diagnosisAccordion">
        <div class="accordion-body">
          <form method="POST">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">Pregnancies</label>
                <input type="number" name="pregnancies" class="form-control"
                       value="2" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Blood sugar (Glucose mg/dL)</label>
                <input type="number" name="glucose" class="form-control"
                       value="120" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Blood pressure (mmâ€¯Hg)</label>
                <input type="number" name="blood_pressure" class="form-control"
                       value="70" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Skin fold thickness (mm)</label>
                <input type="number" name="skin_thickness" class="form-control"
                       value="20" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Insulin level (Î¼U/mL)</label>
                <input type="number" name="insulin" class="form-control"
                       value="85" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">BMI (Body Massâ€¯Index)</label>
                <input type="number" step="0.1" name="bmi" class="form-control"
                       value="24.5" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Family diabetes score</label>
                <input type="number" step="0.1" name="diabetes_pedigree"
                       class="form-control" value="0.5" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Age (years)</label>
                <input type="number" name="age" class="form-control"
                       value="30" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Daily exercise (hours)</label>
                <input type="number" step="0.1" name="physical_activity"
                       class="form-control" value="1.0" min="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Healthyâ€‘eating score 1â€‘5</label>
                <input type="number" step="0.1" name="diet" class="form-control"
                       value="3" min="1" max="5">
              </div>
            </div>
            <button type="submit" class="btn btn-warning mt-3">
              ğŸ©º  Check my diabetes risk
            </button>
          </form>
          {% if diabetes_result %}
          <div class="alert alert-info mt-3">
            <strong>Your diabetes risk:</strong> {{ diabetes_result }}
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- HEART ---------------------------------------------------------->
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingHeart">
        <button class="accordion-button collapsed" type="button"
                data-bs-toggle="collapse" data-bs-target="#collapseHeart">
          â¤ï¸  Heart Disease Checker
        </button>
      </h2>
      <div id="collapseHeart" class="accordion-collapse collapse"
           data-bs-parent="#diagnosisAccordion">
        <div class="accordion-body">
          <form method="POST">
            <div class="row g-3">
              <div class="col-md-3">
                <label class="form-label">Your age</label>
                <input type="number" name="age" class="form-control" value="45">
              </div>
              <div class="col-md-3">
                <label class="form-label">Sex (1â€¯=â€¯male, 0â€¯=â€¯female)</label>
                <input type="number" name="sex" class="form-control" value="1">
              </div>
              <div class="col-md-3">
                <label class="form-label">Chestâ€‘pain type (0â€‘3)</label>
                <input type="number" name="cp" class="form-control" value="0">
              </div>
              <div class="col-md-3">
                <label class="form-label">Resting bloodâ€¯pressure</label>
                <input type="number" name="trestbps" class="form-control"
                       value="130">
              </div>
              <div class="col-md-3">
                <label class="form-label">Cholesterol (mg/dL)</label>
                <input type="number" name="chol" class="form-control"
                       value="220">
              </div>
              <div class="col-md-3">
                <label class="form-label">Fasting blood sugar &gt; 120 (0/1)</label>
                <input type="number" name="fbs" class="form-control" value="0">
              </div>
              <div class="col-md-3">
                <label class="form-label">ECG result (0â€‘2)</label>
                <input type="number" name="restecg" class="form-control"
                       value="1">
              </div>
              <div class="col-md-3">
                <label class="form-label">Max heart rate</label>
                <input type="number" name="thalach" class="form-control"
                       value="150">
              </div>
              <div class="col-md-3">
                <label class="form-label">Exerciseâ€‘induced angina (0/1)</label>
                <input type="number" name="exang" class="form-control" value="0">
              </div>
              <div class="col-md-3">
                <label class="form-label">ST depression</label>
                <input type="number" step="0.1" name="oldpeak"
                       class="form-control" value="1.0">
              </div>
              <div class="col-md-3">
                <label class="form-label">Slope (0â€‘2)</label>
                <input type="number" name="slope" class="form-control" value="1">
              </div>
              <div class="col-md-3">
                <label class="form-label">Number of blocked vessels (0â€‘3)</label>
                <input type="number" name="ca" class="form-control" value="0">
              </div>
              <div class="col-md-3">
                <label class="form-label">Thalassemia (0â€‘3)</label>
                <input type="number" name="thal" class="form-control" value="2">
              </div>
            </div>
            <button type="submit" class="btn btn-danger mt-3">
              â¤ï¸â€ğŸ©¹  Check my heart risk
            </button>
          </form>
          {% if heart_result %}
          <div class="alert alert-info mt-3">
            <strong>Your heartâ€‘disease risk:</strong> {{ heart_result }}
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- STROKE --------------------------------------------------------->
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingStroke">
        <button class="accordion-button collapsed" type="button"
                data-bs-toggle="collapse" data-bs-target="#collapseStroke">
          ğŸ§  Brain Stroke Risk Checker
        </button>
      </h2>
      <div id="collapseStroke" class="accordion-collapse collapse"
           data-bs-parent="#diagnosisAccordion">
        <div class="accordion-body">
          <form method="POST">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">Gender (0â€¯=â€¯F,â€¯1â€¯=â€¯M,â€¯2â€¯=â€¯Other)</label>
                <input type="number" name="gender" class="form-control"
                       value="1">
              </div>
              <div class="col-md-4">
                <label class="form-label">Age</label>
                <input type="number" name="age" class="form-control"
                       value="60">
              </div>
              <div class="col-md-4">
                <label class="form-label">Hypertension (0/1)</label>
                <input type="number" name="hypertension" class="form-control"
                       value="1">
              </div>
              <div class="col-md-4">
                <label class="form-label">Heart disease (0/1)</label>
                <input type="number" name="heart_disease" class="form-control"
                       value="0">
              </div>
              <div class="col-md-4">
                <label class="form-label">Ever married (0/1)</label>
                <input type="number" name="ever_married" class="form-control"
                       value="1">
              </div>
              <div class="col-md-4">
                <label class="form-label">Work type (0â€‘4)</label>
                <input type="number" name="work_type" class="form-control"
                       value="2">
              </div>
              <div class="col-md-4">
                <label class="form-label">Residence (0â€¯=â€¯rural,â€¯1â€¯=â€¯urban)</label>
                <input type="number" name="Residence_type" class="form-control"
                       value="1">
              </div>
              <div class="col-md-4">
                <label class="form-label">Glucose level (mg/dL)</label>
                <input type="number" step="0.1" name="avg_glucose_level"
                       class="form-control" value="105.2">
              </div>
              <div class="col-md-4">
                <label class="form-label">BMI</label>
                <input type="number" step="0.1" name="bmi"
                       class="form-control" value="26.5">
              </div>
              <div class="col-md-4">
                <label class="form-label">Smoking status (0â€‘2)</label>
                <input type="number" name="smoking_status" class="form-control"
                       value="1">
              </div>
            </div>
            <button type="submit" class="btn btn-secondary mt-3">
              ğŸ§ âœ¨  Check my stroke risk
            </button>
          </form>
          {% if stroke_result %}
          <div class="alert alert-info mt-3">
            <strong>Your stroke risk:</strong> {{ stroke_result }}
          </div>
          {% endif %}
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
